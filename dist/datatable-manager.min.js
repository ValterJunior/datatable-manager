function DataTableManager(t,e){this.table=$("#"+t).DataTable(),this.key=e,this.classesButtons={buttonEdit:"btn-circle bg-color-blue txt-color-white",iconEdit:"fa fa-edit",buttonRemove:"btn-circle btn-danger",iconRemove:"fa fa-trash-o"},this.CLASS_DELETE="tbl-man-"+t+"-del",this.CLASS_EDIT="tbl-man-"+t+"-edit",this.BTN_EDIT=0,this.BTN_DELETE=1,this.enableDelete=!0,this.enableEdit=!1,this.data=[],this.onPrintCallBack=[],this.onAfterDeleteCallBack=null,this.onEditCallBack=null,this.hiddenFields=[];var a=this;$("#"+t+" tbody").on("click","tr a."+this.CLASS_DELETE,function(){var t=a.table.row($(this).closest("tr")).index();a.removeRowAndData(t)}),$("#"+t+" tbody").on("click","tr a."+this.CLASS_EDIT,function(){var t=a.table.row($(this).closest("tr")).index();a.executeEdit(t)}),this.getButtonCode=function(t){var e="";return t===this.BTN_EDIT?e='<a href="javascript:void(0);" class="'+this.classesButtons.buttonEdit+" dtm-edit-btn "+this.CLASS_EDIT+'"><i class="'+this.classesButtons.iconEdit+' dtm-edit-icon"></i></a>':t===this.BTN_DELETE&&(e='<a href="javascript:void(0);" class="'+this.classesButtons.buttonRemove+" dtm-remove-btn "+this.CLASS_DELETE+'"><i class="'+this.classesButtons.iconRemove+' dtm-remove-icon"></i></a>'),e},this.getCallBackPrint=function(t){for(var e in this.onPrintCallBack)if(this.onPrintCallBack[e].field===t)return this.onPrintCallBack[e].callback},this.isIndexOnRange=function(t){return this.getData().length>0&&t>=0&&t<this.getData().length},this.isHiddenField=function(t){return $.inArray(t,this.hiddenFields,0)>=0},this.setButton=function(t){var e="";this.enableEdit&&(e+=this.getButtonCode(this.BTN_EDIT)),this.enableDelete&&(e+=this.getButtonCode(this.BTN_DELETE)),e.length>0&&t.push(e)},this.clear()}DataTableManager.prototype.setButtonEditCSSClass=function(t){"string"==typeof t&&t.length>0&&(this.classesButtons.buttonEdit=t)},DataTableManager.prototype.setIconEditCSSClass=function(t){"string"==typeof t&&t.length>0&&(this.classesButtons.iconEdit=t)},DataTableManager.prototype.setButtonRemoveCSSClass=function(t){"string"==typeof t&&t.length>0&&(this.classesButtons.buttonRemove=t)},DataTableManager.prototype.setIconRemoveCSSClass=function(t){"string"==typeof t&&t.length>0&&(this.classesButtons.iconRemove=t)},DataTableManager.prototype.enableDeleteButton=function(t){this.enableDelete=t},DataTableManager.prototype.enableEditButton=function(t){this.enableEdit=t},DataTableManager.prototype.loadData=function(t){if(t&&t.length>0){this.clear();for(var e=0;e<t.length;e++)this.addRow(t[e])}},DataTableManager.prototype.addRow=function(t){for(var e=Object.keys(t),a=[],n=0;n<e.length;n++)if(e[n]!==this.key&&!this.isHiddenField(e[n])){var i=this.getCallBackPrint(e[n]);i?a.push(i(t[e[n]])):a.push(t[e[n]])}a.length>0&&(this.setButton(a),this.table.row.add(a).draw().index()),this.data.push(t)},DataTableManager.prototype.removeRowAndData=function(t){this.table.row(t).remove().draw(),this.isIndexOnRange(t)&&this.data.splice(t,1),this.onAfterDeleteCallBack&&this.onAfterDeleteCallBack()},DataTableManager.prototype.executeEdit=function(t){this.isIndexOnRange(t)&&this.onEditCallBack&&this.onEditCallBack(this.data[t])},DataTableManager.prototype.getData=function(){return this.data},DataTableManager.prototype.getRow=function(t){return this.isIndexOnRange(t)?this.getData()[t]:null},DataTableManager.prototype.getIndex=function(t){if(this.getData().length>0){var e;for(e in this.getData())if(this.getData()[e][this.key]===t)return e}return-1},DataTableManager.prototype.postRowByIndex=function(t,e){if(t>=0){var a=Object.keys(e),n=this.getRow(t);if(n){var i;for(i in a)a[i]!==this.key&&n.hasOwnProperty(a[i])&&(n[a[i]]=e[a[i]]);this.refresh()}}},DataTableManager.prototype.postRow=function(t){var e=this.getIndex(t[this.key]);t.hasOwnProperty(this.key)&&this.postRowByIndex(e,t)},DataTableManager.prototype.getDataToString=function(t){var e=JSON.stringify(this.getData());return t?escapeHtmlJson(e):e},DataTableManager.prototype.clear=function(){this.data=[],this.table.clear().draw()},DataTableManager.prototype.refresh=function(){var t=this.data;this.clear(),this.loadData(t)},DataTableManager.prototype.onPrint=function(t,e){this.onPrintCallBack.push({field:t,callback:e})},DataTableManager.prototype.onAfterDelete=function(t){this.onAfterDeleteCallBack=t},DataTableManager.prototype.onEdit=function(t){this.onEditCallBack=t},DataTableManager.prototype.setHiddenFields=function(t){this.hiddenFields=t};